<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulateur Arrima Gratuit - Calculateur de Score Québec</title>
    <meta name="description" content="Calculez votre score potentiel pour l'immigration au Québec avec notre simulateur Arrima gratuit. Outil complet et précis.">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* Reset and Base Styles */
        *,
        ::before,
        ::after {
            box-sizing: border-box;
            border-width: 0;
            border-style: solid;
            border-color: #e5e7eb;
        }

        html {
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        body {
            margin: 0;
            line-height: inherit;
            background-color: #f9fafb;
        }

        /* Layout */
        .min-h-screen { min-height: 100vh; }
        .bg-gray-50 { background-color: #f9fafb; }
        .p-4 { padding: 1rem; }
        .pt-20 { padding-top: 5rem; }
        .pb-32 { padding-bottom: 8rem; }
        .max-w-4xl { max-width: 56rem; }
        .max-w-2xl { max-width: 42rem; }
        .max-w-xs { max-width: 20rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .w-full { width: 100%; }

        /* Typography */
        .text-center { text-align: center; }
        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
        .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
        .text-base { font-size: 1rem; line-height: 1.5rem; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .text-xs { font-size: 0.75rem; line-height: 1rem; }
        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }
        .font-medium { font-weight: 500; }
        .leading-relaxed { line-height: 1.625; }

        /* Colors */
        .text-gray-900 { color: #111827; }
        .text-gray-700 { color: #374151; }
        .text-gray-600 { color: #4b5563; }
        .text-gray-500 { color: #6b7280; }
        .text-blue-900 { color: #1e3a8a; }
        .text-blue-600 { color: #2563eb; }
        .text-purple-600 { color: #9333ea; }
        .text-orange-600 { color: #ea580c; }
        .text-pink-600 { color: #db2777; }
        .text-green-600 { color: #16a34a; }
        .text-green-700 { color: #15803d; }
        .text-green-800 { color: #166534; }
        .text-red-600 { color: #dc2626; }
        .text-yellow-600 { color: #ca8a04; }
        .text-yellow-800 { color: #92400e; }
        .text-white { color: #fff; }
        .text-black { color: #000; }

        /* Background Colors */
        .bg-white { background-color: #fff; }
        .bg-gray-50 { background-color: #f9fafb; }
        .bg-gray-100 { background-color: #f3f4f6; }
        .bg-blue-600 { background-color: #2563eb; }
        .bg-green-50 { background-color: #f0fdf4; }
        .bg-green-600 { background-color: #16a34a; }
        .bg-yellow-50 { background-color: #fefce8; }
        .bg-white\/95 { background-color: rgb(255 255 255 / 0.95); }

        /* Spacing */
        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-6 { margin-top: 1.5rem; }
        .mt-8 { margin-top: 2rem; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .gap-1 { gap: 0.25rem; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .gap-6 { gap: 1.5rem; }
        .space-y-2 > :not([hidden]) ~ :not([hidden]) { margin-top: 0.5rem; }
        .space-y-3 > :not([hidden]) ~ :not([hidden]) { margin-top: 0.75rem; }
        .space-y-4 > :not([hidden]) ~ :not([hidden]) { margin-top: 1rem; }
        .space-y-6 > :not([hidden]) ~ :not([hidden]) { margin-top: 1.5rem; }

        /* Padding */
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .pt-2 { padding-top: 0.5rem; }
        .pt-6 { padding-top: 1.5rem; }
        .pt-8 { padding-top: 2rem; }

        /* Layout Components */
        .fixed { position: fixed; }
        .relative { position: relative; }
        .top-0 { top: 0px; }
        .top-4 { top: 1rem; }
        .left-4 { left: 1rem; }
        .right-4 { right: 1rem; }
        .inset-0 { inset: 0px; }
        .z-50 { z-index: 50; }
        .z-60 { z-index: 60; }

        /* Flexbox */
        .flex { display: flex; }
        .flex-1 { flex: 1 1 0%; }
        .flex-col { flex-direction: column; }
        .flex-wrap { flex-wrap: wrap; }
        .items-center { align-items: center; }
        .items-start { align-items: flex-start; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }

        /* Grid */
        .grid { display: grid; }
        .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
        .grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }

        /* Display */
        .hidden { display: none; }
        .block { display: block; }

        /* Borders */
        .border { border-width: 1px; }
        .border-2 { border-width: 2px; }
        .border-t-2 { border-top-width: 2px; }
        .border-b { border-bottom-width: 1px; }
        .border-gray-200 { border-color: #e5e7eb; }
        .border-blue-200 { border-color: #bfdbfe; }
        .border-green-200 { border-color: #bbf7d0; }
        .border-yellow-200 { border-color: #fde047; }

        /* Border Radius */
        .rounded { border-radius: 0.25rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .rounded-2xl { border-radius: 1rem; }
        .rounded-t-lg { border-top-left-radius: 0.5rem; border-top-right-radius: 0.5rem; }

        /* Shadows */
        .shadow-lg { box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }

        /* Backdrop */
        .backdrop-blur-sm { backdrop-filter: blur(4px); }

        /* Overflow */
        .overflow-y-auto { overflow-y: auto; }

        /* Cursor */
        .cursor-pointer { cursor: pointer; }

        /* Opacity */
        .bg-black { background-color: #000; }
        .bg-opacity-50 { background-color: rgb(0 0 0 / 0.5); }

        /* Hover States */
        .hover\:bg-gray-100:hover { background-color: #f3f4f6; }
        .hover\:text-gray-700:hover { color: #374151; }
        .hover\:bg-green-700:hover { background-color: #15803d; }

        /* Disabled States */
        .disabled\:opacity-50:disabled { opacity: 0.5; }

        /* Focus States */
        .focus\:outline-none:focus { outline: 2px solid transparent; outline-offset: 2px; }
        .focus\:ring-2:focus { box-shadow: 0 0 0 3px rgb(59 130 246 / 0.5); }

        /* Component Styles */
        .card {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
            border: 1px solid #e5e7eb;
        }

        .card-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .card-content {
            padding: 1.5rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            font-size: 1rem;
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgb(59 130 246 / 0.1);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            border: 1px solid transparent;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
        }

        .btn-primary {
            background-color: #2563eb;
            color: white;
        }

        .btn-primary:hover {
            background-color: #1d4ed8;
        }

        .btn-green {
            background-color: #16a34a;
            color: white;
        }

        .btn-green:hover {
            background-color: #15803d;
        }

        .btn-outline {
            background-color: transparent;
            color: #374151;
            border-color: #d1d5db;
        }

        .btn-outline:hover {
            background-color: #f3f4f6;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .option-btn {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            font-size: 0.875rem;
            color: #374151;
            width: 100%;
        }

        .option-btn:hover {
            border-color: #d1d5db;
        }

        .option-btn.active {
            border-color: #2563eb;
            background-color: #eff6ff;
        }

        .nav-btn {
            padding: 0.375rem 0.75rem;
            border: none;
            border-radius: 1.25rem;
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            background: transparent;
            color: #6b7280;
            text-align: center;
            white-space: nowrap;
        }

        .nav-btn:hover {
            color: #111827;
            background-color: #f3f4f6;
        }

        /* Navigation button active state - FORCE BLUE */
        .nav-btn.active,
        button.nav-btn.active,
        #mobile-nav .nav-btn.active,
        #desktop-nav .nav-btn.active,
        #mobile-nav button.nav-btn.active,
        #desktop-nav button.nav-btn.active {
            background-color: #2563eb !important;
            color: #ffffff !important;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) !important;
            border: none !important;
        }

        .step-panel {
            display: none;
        }

        .step-panel.active {
            display: block;
        }

        .spouse-section {
            border: 2px solid #bfdbfe;
            border-radius: 0.5rem;
            padding: 1.5rem;
            background: rgba(239, 246, 255, 0.3);
            margin: 1.5rem 0;
        }

        .checkbox-container {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .checkbox-container input[type="checkbox"] {
            margin-top: 0.25rem;
            width: 1rem;
            height: 1rem;
        }

        .underline {
            text-decoration: underline;
        }

        .h-px {
            height: 1px;
        }

        .my-2 {
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .w-10 {
            width: 2.5rem;
        }

        .h-10 {
            height: 2.5rem;
        }

        .w-8 {
            width: 2rem;
        }

        .h-8 {
            height: 2rem;
        }

        /* Success message styles */
        .success-message {
            text-align: center;
            padding: 1.5rem;
        }

        .success-title {
            color: #16a34a;
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .success-text {
            color: #15803d;
        }

        /* Lead magnet card styles */
        .lead-magnet-card {
            border: 1px solid #bbf7d0;
            background: #f0fdf4;
        }

        .lead-magnet-header {
            padding: 1.5rem;
            border-bottom: 1px solid #bbf7d0;
        }

        .lead-magnet-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #166534;
            margin-bottom: 0.5rem;
        }

        .lead-magnet-description {
            font-size: 0.875rem;
            color: #15803d;
        }

        .lead-magnet-content {
            padding: 1.5rem;
        }

        /* Form styles */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            font-size: 0.875rem;
            font-weight: 500;
            display: block;
            margin-bottom: 0.25rem;
        }

        /* Responsive Design */
        @media (min-width: 768px) {
            .md\:text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
            .md\:text-2xl { font-size: 1.5rem; line-height: 2rem; }
            .md\:text-xl { font-size: 1.25rem; line-height: 1.75rem; }
            .md\:text-lg { font-size: 1.125rem; line-height: 1.75rem; }
            .md\:text-base { font-size: 1rem; line-height: 1.5rem; }
            .md\:text-sm { font-size: 0.875rem; line-height: 1.25rem; }
            .md\:left-1\/2 { left: 50%; }
            .md\:transform { transform: translateX(-50%); }
            .md\:-translate-x-1\/2 { transform: translateX(-50%); }
            .md\:px-4 { padding-left: 1rem; padding-right: 1rem; }
            .md\:py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
            .md\:max-w-fit { max-width: fit-content; }
            .md\:hidden { display: none; }
            .md\:flex { display: flex; }
            .md\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .md\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
            .md\:gap-8 { gap: 2rem; }
            .md\:flex-row { flex-direction: row; }
        }

        /* Responsive adjustments */
        @media (max-width: 640px) {
            .fixed.top-4 {
                left: 1rem;
                right: 1rem;
                width: calc(100% - 2rem);
            }
        }

        @media (min-width: 768px) {
            .fixed.top-4.md\:left-1\/2.md\:transform.md\:-translate-x-1\/2 {
                left: 50%;
                transform: translateX(-50%);
                max-width: fit-content;
            }
        }

        .btn-enhanced {
            font-weight: bold !important;
            font-size: 1rem !important;
            padding: 1rem 1.5rem !important;
        }

        .btn-cta {
            font-weight: bold !important;
            font-size: 1rem !important;
            padding: 1rem !important;
        }

        /* DEBUG - Make active buttons VERY obvious */
        .nav-btn.active {
            background-color: #2563eb !important;
            color: white !important;
            border: 2px solid #1d4ed8 !important;
            transform: scale(1.05) !important;
        }
    </style>
</head>

<body>
    <!-- Field Explanation Popup -->
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4" id="field-explanation-popup" style="display: none;" onclick="closeFieldExplanation()">
        <div class="bg-white rounded-lg w-full max-w-2xl flex flex-col" style="max-height: calc(100vh - 200px); margin-top: 80px; margin-bottom: 120px;" onclick="event.stopPropagation()">
            <div class="bg-white rounded-t-lg border-b border-gray-200 p-6 flex justify-between items-center">
                <h3 class="text-lg font-semibold">Domaines de formation - Explications détaillées</h3>
                <button onclick="closeFieldExplanation()" class="text-gray-500 hover:text-gray-700 text-2xl font-bold w-10 h-10 flex items-center justify-center rounded-lg hover:bg-gray-100 border border-gray-200">×</button>
            </div>
            <div class="flex-1 overflow-y-auto p-6">
                <div class="space-y-4 text-sm">
                    <div>
                        <h5 class="font-semibold text-blue-900 mb-2">1. Non applicable / Non listé (0 pts)</h5>
                        <p class="text-gray-700">Si votre domaine ne correspond à aucune catégorie ou si vous n'êtes pas certain de la classification de votre formation.</p>
                    </div>
                    <div>
                        <h5 class="font-semibold text-blue-900 mb-2">2. Domaine général / Peu en demande (10 pts)</h5>
                        <p class="text-gray-700">Formations générales sans spécialisation technique pointue. Exemples : Sciences humaines générales, Arts sans lien numérique, Administration générale, Communications, Langues, Histoire, Philosophie.</p>
                    </div>
                    <div>
                        <h5 class="font-semibold text-blue-900 mb-2">3. TI, Génie, Gestion spécialisée, Finance (40 pts)</h5>
                        <p class="text-gray-700">
                            <strong>Technologies de l'information :</strong> Développement logiciel, Cybersécurité, Analyse de données, Intelligence artificielle<br>
                            <strong>Génie :</strong> Civil, Mécanique, Électrique, Informatique, Industriel<br>
                            <strong>Gestion spécialisée :</strong> Gestion de projet, Ressources humaines, Marketing digital<br>
                            <strong>Finance :</strong> Comptabilité CPA, Analyse financière, Actuariat
                        </p>
                    </div>
                    <div>
                        <h5 class="font-semibold text-blue-900 mb-2">4. Santé, Services sociaux, Enseignement, Éducation (70 pts)</h5>
                        <p class="text-gray-700">
                            <strong>Santé :</strong> Médecine, Soins infirmiers, Pharmacie, Physiothérapie, Ergothérapie, Technologie médicale<br>
                            <strong>Services sociaux :</strong> Travail social, Psychologie, Criminologie, Préposés aux bénéficiaires<br>
                            <strong>Enseignement :</strong> Enseignement primaire/secondaire, Éducation spécialisée<br>
                            <strong>Éducation :</strong> Éducation à la petite enfance, Orthopédagogie<br>
                            <em class="text-orange-600">Note : Ces professions sont souvent réglementées au Québec et peuvent nécessiter une reconnaissance professionnelle.</em>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="min-h-screen bg-gray-50 p-4 pt-20 pb-32">
        <!-- Header -->
        <div class="max-w-4xl mx-auto">
            <div class="text-center mb-8 pt-8">
                <h1 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">Simulateur Arrima Gratuit</h1>
                <p class="text-xs md:text-sm text-blue-600 font-medium mb-4">Par J'arrive Québec</p>
                <p class="text-sm md:text-base text-gray-600 max-w-2xl mx-auto">
                    Obtenez une estimation de votre score potentiel pour mieux visualiser votre profil.
                </p>
            </div>

            <!-- Sticky Floating Navigation -->
            <div class="fixed top-4 left-4 right-4 md:left-1/2 md:transform md:-translate-x-1/2 z-50 bg-white/95 backdrop-blur-sm border border-gray-200 rounded-2xl shadow-lg px-3 py-2 md:px-4 md:py-2 md:max-w-fit">
                <!-- Mobile Navigation - 2 rows of 3 -->
                <div class="grid grid-cols-3 gap-2 md:hidden w-full" id="mobile-nav">
                    <button onclick="goToStep(0)" class="nav-btn" data-step="0">1. Profil</button>
                    <button onclick="goToStep(1)" class="nav-btn" data-step="1">2. Français</button>
                    <button onclick="goToStep(2)" class="nav-btn" data-step="2">3. Anglais</button>
                    <button onclick="goToStep(3)" class="nav-btn" data-step="3">4. Québec</button>
                    <button onclick="goToStep(4)" class="nav-btn" data-step="4">5. Autres</button>
                    <button onclick="goToStep(5)" class="nav-btn" data-step="5">6. Résultats</button>
                </div>

                <!-- Desktop Navigation - single row -->
                <div class="hidden md:flex flex-wrap justify-center gap-1" id="desktop-nav">
                    <button onclick="goToStep(0)" class="nav-btn" data-step="0">1. Profil</button>
                    <button onclick="goToStep(1)" class="nav-btn" data-step="1">2. Français</button>
                    <button onclick="goToStep(2)" class="nav-btn" data-step="2">3. Anglais</button>
                    <button onclick="goToStep(3)" class="nav-btn" data-step="3">4. Québec</button>
                    <button onclick="goToStep(4)" class="nav-btn" data-step="4">5. Autres</button>
                    <button onclick="goToStep(5)" class="nav-btn" data-step="5">6. Résultats</button>
                </div>
            </div>

            <!-- Step Content -->
            <div class="mb-8">
                <!-- Step 0: Profil -->
                <div class="step-panel active" id="step-0">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="text-lg md:text-xl font-semibold flex items-center gap-2">
                                👤 Profil personnel et situation conjugale
                            </h2>
                            <p class="text-sm md:text-base text-gray-600">
                                Informations sur votre profil personnel et votre situation conjugale
                            </p>
                        </div>
                        <div class="card-content space-y-6">
                            <div>
                                <label class="text-sm md:text-base font-medium mb-3 block">Situation conjugale</label>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <button onclick="setHasSpouse(false)" class="option-btn" id="single-btn">
                                        <span>👤</span>
                                        <span>Je postule seul(e)</span>
                                    </button>
                                    <button onclick="setHasSpouse(true)" class="option-btn" id="married-btn">
                                        <span>👥</span>
                                        <span>Je postule avec mon conjoint</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Spouse Section -->
                            <div class="spouse-section" id="spouse-section" style="display: none;">
                                <h4 class="text-base md:text-lg font-semibold mb-4">Informations du conjoint</h4>

                                <div class="space-y-4">
                                    <div>
                                        <label class="text-sm md:text-base font-medium mb-3 block">
                                            Compétences orales françaises du conjoint
                                        </label>
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                            <button onclick="setScore('spouseFrenchOral', 0)" class="option-btn" data-score="spouseFrenchOral" data-value="0">
                                                <span>❌</span>
                                                <span>NCLC 1-4</span>
                                            </button>
                                            <button onclick="setScore('spouseFrenchOral', 10)" class="option-btn" data-score="spouseFrenchOral" data-value="10">
                                                <span>💬</span>
                                                <span>NCLC 5-6</span>
                                            </button>
                                            <button onclick="setScore('spouseFrenchOral', 20)" class="option-btn" data-score="spouseFrenchOral" data-value="20">
                                                <span>⭐</span>
                                                <span>NCLC 7+</span>
                                            </button>
                                        </div>
                                    </div>

                                    <div>
                                        <label class="text-sm md:text-base font-medium mb-3 block">Âge du conjoint</label>
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                            <button onclick="setScore('spouseAge', 20)" class="option-btn" data-score="spouseAge" data-value="20">
                                                <span>⭐</span>
                                                <span>18-35 ans</span>
                                            </button>
                                            <button onclick="setScore('spouseAge', 10)" class="option-btn" data-score="spouseAge" data-value="10">
                                                <span>📅</span>
                                                <span>36-40 ans</span>
                                            </button>
                                            <button onclick="setScore('spouseAge', 0)" class="option-btn" data-score="spouseAge" data-value="0">
                                                <span>❌</span>
                                                <span>41+ ans</span>
                                            </button>
                                        </div>
                                    </div>

                                    <div>
                                        <label class="text-sm md:text-base font-medium mb-3 block">Éducation du conjoint</label>
                                        <div class="grid grid-cols-1 gap-3">
                                            <button onclick="setScore('spouseEducation', 0)" class="option-btn" data-score="spouseEducation" data-value="0">
                                                <span>❌</span>
                                                <span>Aucun / Secondaire non terminé</span>
                                            </button>
                                            <button onclick="setScore('spouseEducation', 5)" class="option-btn" data-score="spouseEducation" data-value="5">
                                                <span>📚</span>
                                                <span>Secondaire</span>
                                            </button>
                                            <button onclick="setScore('spouseEducation', 10)" class="option-btn" data-score="spouseEducation" data-value="10">
                                                <span>🎓</span>
                                                <span>Post-secondaire / DEC / Baccalauréat</span>
                                            </button>
                                            <button onclick="setScore('spouseEducation', 20)" class="option-btn" data-score="spouseEducation" data-value="20">
                                                <span>🏆</span>
                                                <span>Diplôme d'études supérieures (Maîtrise/Doctorat)</span>
                                            </button>
                                        </div>
                                    </div>

                                    <div>
                                        <div class="flex items-center gap-2 mb-3">
                                            <label class="text-sm md:text-base font-medium">Domaine d'études du conjoint</label>
                                            <button onclick="showFieldExplanation()" class="text-xs md:text-sm text-blue-600 underline">+ d'infos</button>
                                        </div>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                            <button onclick="setScore('spouseFieldOfStudy', 0)" class="option-btn" data-score="spouseFieldOfStudy" data-value="0">
                                                <span>❌</span>
                                                <span>Domaine non en demande</span>
                                            </button>
                                            <button onclick="setScore('spouseFieldOfStudy', 10)" class="option-btn" data-score="spouseFieldOfStudy" data-value="10">
                                                <span>⭐</span>
                                                <span>Domaine en demande</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <label for="age" class="text-sm md:text-base font-medium">Votre âge</label>
                                <input id="age" type="number" min="18" max="65" placeholder="Entrez votre âge" class="form-input mt-2 max-w-xs" onchange="calculateAgeScore(this.value)">
                                <p class="text-xs md:text-sm text-gray-500 mt-1">Minimum 18 ans</p>
                            </div>

                            <div>
                                <label class="text-sm md:text-base font-medium mb-3 block">Niveau de scolarité</label>
                                <div class="grid grid-cols-1 gap-3">
                                    <button onclick="setScore('education', 0)" class="option-btn" data-score="education" data-value="0">
                                        <span>❌</span>
                                        <span>Aucun / Secondaire non terminé</span>
                                    </button>
                                    <button onclick="setScore('education', 20)" class="option-btn" data-score="education" data-value="20">
                                        <span>📚</span>
                                        <span>Secondaire général ou professionnel</span>
                                    </button>
                                    <button onclick="setScore('education', 40)" class="option-btn" data-score="education" data-value="40">
                                        <span>🎓</span>
                                        <span>Post-secondaire technique (1-2 ans)</span>
                                    </button>
                                    <button onclick="setScore('education', 70)" class="option-btn" data-score="education" data-value="70">
                                        <span>🏅</span>
                                        <span>DEC technique / Post-secondaire (3 ans)</span>
                                    </button>
                                    <button onclick="setScore('education', 90)" class="option-btn" data-score="education" data-value="90">
                                        <span>🎓</span>
                                        <span>Universitaire 1er cycle (Baccalauréat 3+ ans)</span>
                                    </button>
                                    <button onclick="setScore('education', 110)" class="option-btn" data-score="education" data-value="110">
                                        <span>🏆</span>
                                        <span>Universitaire 2e cycle (Maîtrise)</span>
                                    </button>
                                    <button onclick="setScore('education', 130)" class="option-btn" data-score="education" data-value="130">
                                        <span>⭐</span>
                                        <span>Universitaire 3e cycle (Doctorat)</span>
                                    </button>
                                </div>
                            </div>

                            <div>
                                <div class="flex items-center gap-2 mb-3">
                                    <label class="text-sm md:text-base font-medium">Domaine de formation</label>
                                    <button onclick="showFieldExplanation()" class="text-xs md:text-sm text-blue-600 underline">+ d'infos</button>
                                </div>
                                <div class="grid grid-cols-1 gap-3">
                                    <button onclick="setScore('fieldOfStudy', 0)" class="option-btn" data-score="fieldOfStudy" data-value="0">
                                        <span>❌</span>
                                        <span>Non applicable / Non listé</span>
                                    </button>
                                    <button onclick="setScore('fieldOfStudy', 10)" class="option-btn" data-score="fieldOfStudy" data-value="10">
                                        <span>📚</span>
                                        <span>Domaine général / Peu en demande</span>
                                    </button>
                                    <button onclick="setScore('fieldOfStudy', 40)" class="option-btn" data-score="fieldOfStudy" data-value="40">
                                        <span>⚡</span>
                                        <span>TI, Génie, Gestion spécialisée, Finance</span>
                                    </button>
                                    <button onclick="setScore('fieldOfStudy', 70)" class="option-btn" data-score="fieldOfStudy" data-value="70">
                                        <span>❤️</span>
                                        <span>Santé, Services sociaux, Enseignement, Éducation</span>
                                    </button>
                                </div>
                            </div>

                            <div>
                                <label class="text-sm md:text-base font-medium mb-3 block">Expérience de travail</label>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <button onclick="setScore('workExperience', 0)" class="option-btn" data-score="workExperience" data-value="0">
                                        <span>❌</span>
                                        <span>Moins de 6 mois</span>
                                    </button>
                                    <button onclick="setScore('workExperience', 20)" class="option-btn" data-score="workExperience" data-value="20">
                                        <span>💼</span>
                                        <span>6-11 mois</span>
                                    </button>
                                    <button onclick="setScore('workExperience', 40)" class="option-btn" data-score="workExperience" data-value="40">
                                        <span>💼</span>
                                        <span>12-23 mois</span>
                                    </button>
                                    <button onclick="setScore('workExperience', 60)" class="option-btn" data-score="workExperience" data-value="60">
                                        <span>🏅</span>
                                        <span>24-35 mois</span>
                                    </button>
                                    <button onclick="setScore('workExperience', 80)" class="option-btn" data-score="workExperience" data-value="80">
                                        <span>🏆</span>
                                        <span>36-47 mois</span>
                                    </button>
                                    <button onclick="setScore('workExperience', 100)" class="option-btn" data-score="workExperience" data-value="100">
                                        <span>⭐</span>
                                        <span>48+ mois</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 1: Français -->
                <div class="step-panel" id="step-1">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="text-lg md:text-xl font-semibold flex items-center gap-2">
                                🇫🇷 Compétences linguistiques en français (NCLC)
                            </h2>
                            <p class="text-sm md:text-base text-gray-600">Évaluez vos compétences linguistiques en français</p>
                        </div>
                        <div class="card-content">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="text-sm md:text-base font-medium mb-3 block flex items-center gap-2">
                                        🎧 Compréhension orale (Écoute)
                                    </label>
                                    <div class="space-y-2">
                                        <button onclick="setScore('frenchOralComprehension', 0)" class="option-btn" data-score="frenchOralComprehension" data-value="0">
                                            <span>❌</span>
                                            <span>NCLC 1-4 / Non testé</span>
                                        </button>
                                        <button onclick="setScore('frenchOralComprehension', 20)" class="option-btn" data-score="frenchOralComprehension" data-value="20">
                                            <span>💬</span>
                                            <span>NCLC 5</span>
                                        </button>
                                        <button onclick="setScore('frenchOralComprehension', 40)" class="option-btn" data-score="frenchOralComprehension" data-value="40">
                                            <span>💡</span>
                                            <span>NCLC 6</span>
                                        </button>
                                        <button onclick="setScore('frenchOralComprehension', 80)" class="option-btn" data-score="frenchOralComprehension" data-value="80">
                                            <span>🎯</span>
                                            <span>NCLC 7</span>
                                        </button>
                                        <button onclick="setScore('frenchOralComprehension', 90)" class="option-btn" data-score="frenchOralComprehension" data-value="90">
                                            <span>🔥</span>
                                            <span>NCLC 8</span>
                                        </button>
                                        <button onclick="setScore('frenchOralComprehension', 100)" class="option-btn" data-score="frenchOralComprehension" data-value="100">
                                            <span>⭐</span>
                                            <span>NCLC 9</span>
                                        </button>
                                        <button onclick="setScore('frenchOralComprehension', 110)" class="option-btn" data-score="frenchOralComprehension" data-value="110">
                                            <span>🏆</span>
                                            <span>NCLC 10+</span>
                                        </button>
                                    </div>
                                </div>

                                <div>
                                    <label class="text-sm md:text-base font-medium mb-3 block flex items-center gap-2">
                                        🎤 Production orale (Expression)
                                    </label>
                                    <div class="space-y-2">
                                        <button onclick="setScore('frenchOralProduction', 0)" class="option-btn" data-score="frenchOralProduction" data-value="0">
                                            <span>❌</span>
                                            <span>NCLC 1-4 / Non testé</span>
                                        </button>
                                        <button onclick="setScore('frenchOralProduction', 20)" class="option-btn" data-score="frenchOralProduction" data-value="20">
                                            <span>💬</span>
                                            <span>NCLC 5</span>
                                        </button>
                                        <button onclick="setScore('frenchOralProduction', 40)" class="option-btn" data-score="frenchOralProduction" data-value="40">
                                            <span>💡</span>
                                            <span>NCLC 6</span>
                                        </button>
                                        <button onclick="setScore('frenchOralProduction', 80)" class="option-btn" data-score="frenchOralProduction" data-value="80">
                                            <span>🎯</span>
                                            <span>NCLC 7</span>
                                        </button>
                                        <button onclick="setScore('frenchOralProduction', 90)" class="option-btn" data-score="frenchOralProduction" data-value="90">
                                            <span>🔥</span>
                                            <span>NCLC 8</span>
                                        </button>
                                        <button onclick="setScore('frenchOralProduction', 100)" class="option-btn" data-score="frenchOralProduction" data-value="100">
                                            <span>⭐</span>
                                            <span>NCLC 9</span>
                                        </button>
                                        <button onclick="setScore('frenchOralProduction', 110)" class="option-btn" data-score="frenchOralProduction" data-value="110">
                                            <span>🏆</span>
                                            <span>NCLC 10+</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                                <div>
                                    <label class="text-sm md:text-base font-medium mb-3 block flex items-center gap-2">
                                        👁️ Compréhension écrite (Lecture)
                                    </label>
                                    <div class="space-y-2">
                                        <button onclick="setScore('frenchWrittenComprehension', 0)" class="option-btn" data-score="frenchWrittenComprehension" data-value="0">
                                            <span>❌</span>
                                            <span>NCLC 1-4</span>
                                        </button>
                                        <button onclick="setScore('frenchWrittenComprehension', 10)" class="option-btn" data-score="frenchWrittenComprehension" data-value="10">
                                            <span>💬</span>
                                            <span>NCLC 5</span>
                                        </button>
                                        <button onclick="setScore('frenchWrittenComprehension', 20)" class="option-btn" data-score="frenchWrittenComprehension" data-value="20">
                                            <span>💡</span>
                                            <span>NCLC 6</span>
                                        </button>
                                        <button onclick="setScore('frenchWrittenComprehension', 30)" class="option-btn" data-score="frenchWrittenComprehension" data-value="30">
                                            <span>⭐</span>
                                            <span>NCLC 7+</span>
                                        </button>
                                    </div>
                                </div>

                                <div>
                                    <label class="text-sm md:text-base font-medium mb-3 block flex items-center gap-2">
                                        ✍️ Production écrite (Écriture)
                                    </label>
                                    <div class="space-y-2">
                                        <button onclick="setScore('frenchWrittenProduction', 0)" class="option-btn" data-score="frenchWrittenProduction" data-value="0">
                                            <span>❌</span>
                                            <span>NCLC 1-4</span>
                                        </button>
                                        <button onclick="setScore('frenchWrittenProduction', 10)" class="option-btn" data-score="frenchWrittenProduction" data-value="10">
                                            <span>💬</span>
                                            <span>NCLC 5</span>
                                        </button>
                                        <button onclick="setScore('frenchWrittenProduction', 20)" class="option-btn" data-score="frenchWrittenProduction" data-value="20">
                                            <span>💡</span>
                                            <span>NCLC 6</span>
                                        </button>
                                        <button onclick="setScore('frenchWrittenProduction', 30)" class="option-btn" data-score="frenchWrittenProduction" data-value="30">
                                            <span>⭐</span>
                                            <span>NCLC 7+</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Anglais -->
                <div class="step-panel" id="step-2">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="text-lg md:text-xl font-semibold flex items-center gap-2">
                                🇬🇧 Compétences linguistiques en anglais - Points bonus (CLB)
                            </h2>
                            <p class="text-sm md:text-base text-gray-600">Points bonus pour la maîtrise de l'anglais</p>
                        </div>
                        <div class="card-content">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="text-sm md:text-base font-medium mb-3 block flex items-center gap-2">
                                        🎧 Écoute
                                    </label>
                                    <div class="space-y-2">
                                        <button onclick="setScore('englishOralComprehension', 0)" class="option-btn" data-score="englishOralComprehension" data-value="0">
                                            <span>❌</span>
                                            <span>CLB 1-4</span>
                                        </button>
                                        <button onclick="setScore('englishOralComprehension', 6)" class="option-btn" data-score="englishOralComprehension" data-value="6">
                                            <span>💡</span>
                                            <span>CLB 5-8</span>
                                        </button>
                                        <button onclick="setScore('englishOralComprehension', 12)" class="option-btn" data-score="englishOralComprehension" data-value="12">
                                            <span>⭐</span>
                                            <span>CLB 9+</span>
                                        </button>
                                    </div>
                                </div>

                                <div>
                                    <label class="text-sm md:text-base font-medium mb-3 block flex items-center gap-2">
                                        🔊 Expression
                                    </label>
                                    <div class="space-y-2">
                                        <button onclick="setScore('englishOralProduction', 0)" class="option-btn" data-score="englishOralProduction" data-value="0">
                                            <span>❌</span>
                                            <span>CLB 1-4</span>
                                        </button>
                                        <button onclick="setScore('englishOralProduction', 6)" class="option-btn" data-score="englishOralProduction" data-value="6">
                                            <span>💡</span>
                                            <span>CLB 5-8</span>
                                        </button>
                                        <button onclick="setScore('englishOralProduction', 12)" class="option-btn" data-score="englishOralProduction" data-value="12">
                                            <span>⭐</span>
                                            <span>CLB 9+</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                                <div>
                                    <label class="text-sm md:text-base font-medium mb-3 block flex items-center gap-2">
                                        🔍 Lecture
                                    </label>
                                    <div class="space-y-2">
                                        <button onclick="setScore('englishWrittenComprehension', 0)" class="option-btn" data-score="englishWrittenComprehension" data-value="0">
                                            <span>❌</span>
                                            <span>CLB 1-4</span>
                                        </button>
                                        <button onclick="setScore('englishWrittenComprehension', 6)" class="option-btn" data-score="englishWrittenComprehension" data-value="6">
                                            <span>💡</span>
                                            <span>CLB 5-8</span>
                                        </button>
                                        <button onclick="setScore('englishWrittenComprehension', 12)" class="option-btn" data-score="englishWrittenComprehension" data-value="12">
                                            <span>⭐</span>
                                            <span>CLB 9+</span>
                                        </button>
                                    </div>
                                </div>

                                <div>
                                    <label class="text-sm md:text-base font-medium mb-3 block flex items-center gap-2">
                                        ✏️ Écriture
                                    </label>
                                    <div class="space-y-2">
                                        <button onclick="setScore('englishWrittenProduction', 0)" class="option-btn" data-score="englishWrittenProduction" data-value="0">
                                            <span>❌</span>
                                            <span>CLB 1-4</span>
                                        </button>
                                        <button onclick="setScore('englishWrittenProduction', 6)" class="option-btn" data-score="englishWrittenProduction" data-value="6">
                                            <span>💡</span>
                                            <span>CLB 5-8</span>
                                        </button>
                                        <button onclick="setScore('englishWrittenProduction', 12)" class="option-btn" data-score="englishWrittenProduction" data-value="12">
                                            <span>⭐</span>
                                            <span>CLB 9+</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Québec -->
                <div class="step-panel" id="step-3">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="text-lg md:text-xl font-semibold flex items-center gap-2">
                                📍 Facteurs spécifiques au Québec
                            </h2>
                            <p class="text-sm md:text-base text-gray-600">Points bonus pour les connexions au Québec</p>
                        </div>
                        <div class="card-content space-y-6">
                            <div>
                                <label class="text-sm md:text-base font-medium mb-3 block">Diplôme du Québec</label>
                                <div class="grid grid-cols-1 gap-3">
                                    <button onclick="setScore('quebecDiploma', 0)" class="option-btn" data-score="quebecDiploma" data-value="0">
                                        <span>❌</span>
                                        <span>Aucun diplôme du Québec</span>
                                    </button>
                                    <button onclick="setScore('quebecDiploma', 70)" class="option-btn" data-score="quebecDiploma" data-value="70">
                                        <span>🏅</span>
                                        <span>DEP (≥1800h) / AEC / DEC technique</span>
                                    </button>
                                    <button onclick="setScore('quebecDiploma', 100)" class="option-btn" data-score="quebecDiploma" data-value="100">
                                        <span>🏆</span>
                                        <span>Diplôme universitaire (Baccalauréat, Maîtrise, Doctorat)</span>
                                    </button>
                                </div>
                            </div>

                            <div>
                                <label class="text-sm md:text-base font-medium mb-3 block">Expérience de travail au Québec</label>
                                <div class="grid grid-cols-1 gap-3">
                                    <button onclick="setScore('quebecWorkExperience', 0)" class="option-btn" data-score="quebecWorkExperience" data-value="0">
                                        <span>❌</span>
                                        <span>Aucune expérience de travail au Québec</span>
                                    </button>
                                    <button onclick="setScore('quebecWorkExperience', 70)" class="option-btn" data-score="quebecWorkExperience" data-value="70">
                                        <span>💼</span>
                                        <span>6-11 mois de travail qualifié</span>
                                    </button>
                                    <button onclick="setScore('quebecWorkExperience', 110)" class="option-btn" data-score="quebecWorkExperience" data-value="110">
                                        <span>⭐</span>
                                        <span>12+ mois de travail qualifié</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Autres -->
                <div class="step-panel" id="step-4">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="text-lg md:text-xl font-semibold flex items-center gap-2">👥 Facteurs additionnels</h2>
                            <p class="text-sm md:text-base text-gray-600">Autres facteurs qui peuvent ajouter des points</p>
                        </div>
                        <div class="card-content space-y-6">
                            <div>
                                <label class="text-sm md:text-base font-medium mb-3 block">
                                    Offre d'emploi validée (MIFI validée)
                                </label>
                                <div class="grid grid-cols-1 gap-3">
                                    <button onclick="setScore('jobOffer', 0)" class="option-btn" data-score="jobOffer" data-value="0">
                                        <span>❌</span>
                                        <span>Aucune offre d'emploi</span>
                                    </button>
                                    <button onclick="setScore('jobOffer', 180)" class="option-btn" data-score="jobOffer" data-value="180">
                                        <span>🏢</span>
                                        <span>Offre d'emploi DANS la région métropolitaine de Montréal</span>
                                    </button>
                                    <button onclick="setScore('jobOffer', 380)" class="option-btn" data-score="jobOffer" data-value="380">
                                        <span>⭐</span>
                                        <span>Offre d'emploi HORS de la région métropolitaine de Montréal</span>
                                    </button>
                                </div>
                            </div>

                            <div>
                                <label class="text-sm md:text-base font-medium mb-3 block">Enfants à charge</label>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                    <button onclick="setScore('children', 0)" class="option-btn" data-score="children" data-value="0">
                                        <span>❌</span>
                                        <span>Aucun enfant</span>
                                    </button>
                                    <button onclick="setScore('children', 30)" class="option-btn" data-score="children" data-value="30">
                                        <span>👶</span>
                                        <span>1 enfant</span>
                                    </button>
                                    <button onclick="setScore('children', 55)" class="option-btn" data-score="children" data-value="55">
                                        <span>👨‍👩‍👧‍👦</span>
                                        <span>2+ enfants</span>
                                    </button>
                                </div>
                            </div>

                            <div>
                                <label class="text-sm md:text-base font-medium mb-3 block">Famille proche au Québec</label>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <button onclick="setScore('familyInQuebec', 0)" class="option-btn" data-score="familyInQuebec" data-value="0">
                                        <span>❌</span>
                                        <span>Non</span>
                                    </button>
                                    <button onclick="setScore('familyInQuebec', 20)" class="option-btn" data-score="familyInQuebec" data-value="20">
                                        <span>🏠</span>
                                        <span>Oui</span>
                                    </button>
                                </div>
                            </div>

                            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 md:p-6">
                                <h4 class="text-base md:text-lg font-semibold mb-2 flex items-center gap-2">
                                    ⏰ Capacité d'autonomie financière (Condition Essentielle)
                                </h4>
                                <p class="text-xs md:text-sm text-gray-600 mb-4">
                                    Cette condition est obligatoire pour obtenir le CSQ et la résidence permanente
                                </p>
                                <div class="checkbox-container">
                                    <input type="checkbox" id="financial-autonomy" onchange="setFinancialAutonomy(this.checked)">
                                    <label for="financial-autonomy" class="text-xs md:text-sm leading-relaxed text-yellow-800 font-medium">
                                        Je comprends que je dois prouver ma capacité d'autonomie financière pour subvenir à mes besoins et
                                        à ceux de ma famille pendant les 3 premiers mois. (Ceci n'ajoute pas de points au classement
                                        Arrima mais est obligatoire pour le CSQ/RP)
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 5: Results -->
                <div class="step-panel" id="step-5">
                    <div class="space-y-6">
                        <div class="text-center mb-6">
                            <h2 class="text-xl md:text-2xl font-bold text-gray-900">Résultats</h2>
                        </div>

                        <div class="card" id="score-breakdown">
                            <div class="card-header">
                                <div class="flex flex-col md:flex-row justify-between items-start gap-4">
                                    <div>
                                        <h2 class="text-lg md:text-xl font-semibold">Répartition détaillée des points</h2>
                                        <p class="text-sm md:text-base text-gray-600">
                                            Répartition complète de tous les points par catégorie
                                        </p>
                                    </div>
                                    <div class="text-left md:text-right">
                                        <div class="flex items-center gap-2 mb-1">
                                            <div class="w-8 h-8 bg-blue-600 rounded flex items-center justify-center text-white text-xs font-bold">
                                                JQ
                                            </div>
                                            <span class="text-xs md:text-sm font-medium text-blue-600">J'arrive Québec</span>
                                        </div>
                                        <a href="https://www.jarrivequebec.com" target="_blank" class="text-xs text-blue-600 underline">
                                            www.jarrivequebec.com
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
                                    <div class="space-y-6">
                                        <div>
                                            <h4 class="text-base md:text-lg font-semibold text-blue-600 mb-3">
                                                Compétences linguistiques
                                            </h4>
                                            <div class="space-y-2 text-xs md:text-sm">
                                                <div class="flex justify-between">
                                                    <span>Compréhension orale:</span>
                                                    <span class="font-medium" id="score-french-oral-comp">0 pts</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>Production orale:</span>
                                                    <span class="font-medium" id="score-french-oral-prod">0 pts</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>Compréhension écrite:</span>
                                                    <span class="font-medium" id="score-french-written-comp">0 pts</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>Production écrite:</span>
                                                    <span class="font-medium" id="score-french-written-prod">0 pts</span>
                                                </div>
                                                <div class="flex justify-between font-semibold border-t pt-2">
                                                    <span>Sous-total français:</span>
                                                    <span class="text-blue-600" id="score-french-total">0 pts</span>
                                                </div>
                                                <div class="h-px bg-gray-200 my-2"></div>
                                                <div class="flex justify-between">
                                                    <span>Anglais (toutes compétences):</span>
                                                    <span class="font-medium" id="score-english-total">0 pts</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div>
                                            <h4 class="text-base md:text-lg font-semibold text-purple-600 mb-3">Capital humain</h4>
                                            <div class="space-y-2 text-xs md:text-sm">
                                                <div class="flex justify-between">
                                                    <span>Âge:</span>
                                                    <span class="font-medium" id="score-age">0 pts</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>Niveau de scolarité:</span>
                                                    <span class="font-medium" id="score-education">0 pts</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>Domaine de formation:</span>
                                                    <span class="font-medium" id="score-field-of-study">0 pts</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>Expérience de travail:</span>
                                                    <span class="font-medium" id="score-work-experience">0 pts</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="space-y-6">
                                        <div>
                                            <h4 class="text-base md:text-lg font-semibold text-orange-600 mb-3">Facteurs Québec</h4>
                                            <div class="space-y-2 text-xs md:text-sm">
                                                <div class="flex justify-between">
                                                    <span>Diplôme du Québec:</span>
                                                    <span class="font-medium" id="score-quebec-diploma">0 pts</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>Expérience de travail au Québec:</span>
                                                    <span class="font-medium" id="score-quebec-work">0 pts</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div id="spouse-scores-section" style="display: none;">
                                            <h4 class="text-base md:text-lg font-semibold text-pink-600 mb-3">Facteurs conjoint</h4>
                                            <div class="space-y-2 text-xs md:text-sm">
                                                <div class="flex justify-between">
                                                    <span>Compétences orales françaises du conjoint:</span>
                                                    <span class="font-medium" id="score-spouse-french">0 pts</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>Âge du conjoint:</span>
                                                    <span class="font-medium" id="score-spouse-age">0 pts</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>Éducation du conjoint:</span>
                                                    <span class="font-medium" id="score-spouse-education">0 pts</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>Domaine d'études du conjoint:</span>
                                                    <span class="font-medium" id="score-spouse-field">0 pts</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div>
                                            <h4 class="text-base md:text-lg font-semibold text-green-600 mb-3">
                                                Facteurs additionnels
                                            </h4>
                                            <div class="space-y-2 text-xs md:text-sm">
                                                <div class="flex justify-between">
                                                    <span>Offre d'emploi:</span>
                                                    <span class="font-medium" id="score-job-offer">0 pts</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>Enfants à charge:</span>
                                                    <span class="font-medium" id="score-children">0 pts</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>Famille proche au Québec:</span>
                                                    <span class="font-medium" id="score-family">0 pts</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="border-t-2 pt-6 mt-6">
                                    <div class="flex flex-col md:flex-row justify-between items-center gap-2">
                                        <span class="text-lg md:text-xl font-bold">SCORE TOTAL:</span>
                                        <span class="text-lg md:text-xl font-bold text-black" id="total-score">0 points</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-col md:flex-row gap-4 md:gap-6 justify-center items-center" id="navigation-buttons-results">
                            <button onclick="resetCalculator()" class="btn btn-outline w-full md:w-auto" style="font-weight: bold; font-size: 1rem; padding: 1rem 1.5rem;">
                                🔄 Réinitialiser le calculateur
                            </button>
                            <button onclick="downloadResults()" class="btn btn-primary w-full md:w-auto" style="font-weight: bold; font-size: 1rem; padding: 1rem 1.5rem;">
                                📥 Télécharger les résultats
                            </button>
                        </div>

                        <!-- Lead Magnet Form -->
                        <div class="card lead-magnet-card">
                            <div class="lead-magnet-header">
                                <h3 class="lead-magnet-title">
                                    Téléchargez Votre Guide Gratuit des Documents Arrima
                                </h3>
                                <p class="lead-magnet-description">
                                    Ce guide est votre allié pour aborder la collecte de documents avec confiance. Chaque point est clarifié et chaque étape est simplifiée. En la téléchargeant, vous ne recevez pas juste une liste ; vous prenez une décision : celle d'être organisé et prêt pour la suite.
                                </p>
                            </div>
                            <div class="lead-magnet-content">
                                <div id="lead-form">
                                    <form onsubmit="handleLeadMagnetSubmit(event)" class="space-y-4">
                                        <div class="form-group">
                                            <label for="lead-email" class="form-label">Adresse courriel</label>
                                            <input id="lead-email" type="email" required placeholder="votre.courriel@exemple.com" class="form-input">
                                        </div>

                                        <div class="space-y-3">
                                            <div class="checkbox-container">
                                                <input type="checkbox" id="consent-communications" required>
                                                <label for="consent-communications" class="text-xs md:text-sm leading-relaxed">
                                                    Je veux le guide et j'accepte de recevoir les communications de J'arrive Québec, sachant que
                                                    je peux me désinscrire à tout moment.
                                                </label>
                                            </div>

                                            <div class="checkbox-container">
                                                <input type="checkbox" id="consent-privacy" required>
                                                <label for="consent-privacy" class="text-xs md:text-sm leading-relaxed">
                                                    J'ai lu et j'accepte la
                                                    <a href="https://jarrivequebec.com/politique-confidentialite" class="text-blue-600 underline" target="_blank">Politique de Confidentialité</a>
                                                    et les
                                                    <a href="https://jarrivequebec.com/conditions-generales-dutilisation" class="text-blue-600 underline" target="_blank">Conditions Générales d'Utilisation</a>.
                                                </label>
                                            </div>
                                        </div>

                                        <button type="submit" class="btn btn-green w-full" style="font-weight: bold; font-size: 1rem; padding: 1rem;">
                                            📋 Recevoir mon guide gratuit
                                        </button>
                                    </form>
                                </div>

                                <div id="success-message" class="success-message" style="display: none;">
                                    <div class="success-title">✅ Merci et bienvenue !</div>
                                    <p class="success-text">Vous recevrez votre guide dans quelques secondes...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex justify-between items-center" id="navigation-buttons">
                <button onclick="previousStep()" id="prev-btn" class="btn btn-outline">
                    ← Précédent
                </button>

                <div class="text-xs md:text-sm text-gray-500" id="step-indicator">1 / 6</div>

                <button onclick="nextStep()" id="next-btn" class="btn btn-primary">
                    Suivant →
                </button>
            </div>

            <!-- Disclaimer -->
            <div class="mt-8 p-4 bg-gray-50 border border-gray-200 rounded-lg text-center">
                <p class="text-xs text-gray-600 leading-relaxed">
                    <strong>Simulateur de Score de Classement Arrima Québec. Conçu par J'arrive Québec.</strong>
                    <br><br>
                    <strong>AVIS IMPORTANT</strong> Ce calculateur est un outil d'information et ne constitue en aucun cas un avis juridique. Les résultats sont une estimation basée sur les informations que vous fournissez et la grille de points publique. Ils ne garantissent aucun résultat et ne prédisent pas vos chances d'être invité. Seul le gouvernement du Québec (MIFI) et du Canada (IRCC) peuvent évaluer votre profil. Pour toute information officielle, veuillez consulter le site du MIFI.
                </p>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let currentStep = 0;
        let hasSpouse = false;
        let financialAutonomyAccepted = false;

        // Scores object
        let scores = {
            frenchOralComprehension: 0,
            frenchOralProduction: 0,
            frenchWrittenComprehension: 0,
            frenchWrittenProduction: 0,
            englishOralComprehension: 0,
            englishOralProduction: 0,
            englishWrittenComprehension: 0,
            englishWrittenProduction: 0,
            age: 0,
            education: 0,
            fieldOfStudy: 0,
            workExperience: 0,
            quebecDiploma: 0,
            quebecWorkExperience: 0,
            spouseFrenchOral: 0,
            spouseAge: 0,
            spouseEducation: 0,
            spouseFieldOfStudy: 0,
            jobOffer: 0,
            children: 0,
            familyInQuebec: 0
        };

        // Initialize the calculator
        function init() {
            updateNavigation();
            updateScoreDisplay();
            scrollToTop();
        }

        // Navigation functions
        function goToStep(step) {
            if (step >= 0 && step < 6) {
                currentStep = step;
                updateStepDisplay();
                updateNavigation();
                scrollToTop();
            }
        }

        function nextStep() {
            if (currentStep < 5) {
                currentStep++;
                updateStepDisplay();
                updateNavigation();
                scrollToTop();
            }
        }

        function previousStep() {
            if (currentStep > 0) {
                currentStep--;
                updateStepDisplay();
                updateNavigation();
                scrollToTop();
            }
        }

        function updateStepDisplay() {
            // Hide all step panels
            const panels = document.querySelectorAll('.step-panel');
            panels.forEach(panel => panel.classList.remove('active'));

            // Show current step panel
            const currentPanel = document.getElementById(`step-${currentStep}`);
            if (currentPanel) {
                currentPanel.classList.add('active');
            }

            // Update navigation buttons visibility
            const navButtons = document.getElementById('navigation-buttons');
            if (currentStep === 5) {
                navButtons.style.display = 'none';
            } else {
                navButtons.style.display = 'flex';
            }
        }

        function updateNavigation() {
            // Update navigation button states for BOTH mobile and desktop
            const mobileNavButtons = document.querySelectorAll('#mobile-nav .nav-btn');
            const desktopNavButtons = document.querySelectorAll('#desktop-nav .nav-btn');
            
            // Update mobile nav buttons
            mobileNavButtons.forEach((btn, index) => {
                if (index === currentStep) {
                    btn.classList.add('active');
                    console.log('Added active class to mobile button', index); // Debug
                } else {
                    btn.classList.remove('active');
                }
            });
            
            // Update desktop nav buttons
            desktopNavButtons.forEach((btn, index) => {
                if (index === currentStep) {
                    btn.classList.add('active');
                    console.log('Added active class to desktop button', index); // Debug
                } else {
                    btn.classList.remove('active');
                }
            });

            // Update step indicator
            const stepIndicator = document.getElementById('step-indicator');
            if (stepIndicator) {
                stepIndicator.textContent = `${currentStep + 1} / 6`;
            }

            // Update navigation buttons
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');

            if (prevBtn) {
                prevBtn.disabled = currentStep === 0;
            }

            if (nextBtn) {
                nextBtn.disabled = currentStep === 5;
                if (currentStep === 4) {
                    nextBtn.textContent = 'Voir les résultats →';
                } else {
                    nextBtn.textContent = 'Suivant →';
                }
            }

            updateStepDisplay();
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Score management functions
        function setScore(category, value) {
            scores[category] = value;
            updateOptionButtons(category, value);
            updateScoreDisplay();
        }

        function updateOptionButtons(category, value) {
            const buttons = document.querySelectorAll(`[data-score="${category}"]`);
            buttons.forEach(btn => {
                if (parseInt(btn.dataset.value) === value) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }

        function calculateAgeScore(age) {
            age = parseInt(age) || 0;
            let ageScore = 0;
            
            if (age < 18) ageScore = 0;
            else if (age <= 30) ageScore = 130;
            else if (age === 31) ageScore = 124;
            else if (age === 32) ageScore = 118;
            else if (age === 33) ageScore = 112;
            else if (age === 34) ageScore = 106;
            else if (age === 35) ageScore = 100;
            else if (age === 36) ageScore = 88;
            else if (age === 37) ageScore = 76;
            else if (age === 38) ageScore = 64;
            else if (age === 39) ageScore = 52;
            else if (age === 40) ageScore = 40;
            else if (age === 41) ageScore = 26;
            else if (age === 42) ageScore = 13;
            else ageScore = 0;
            
            setScore('age', ageScore);
        }

        function setHasSpouse(spouse) {
            hasSpouse = spouse;
            const spouseSection = document.getElementById('spouse-section');
            const singleBtn = document.getElementById('single-btn');
            const marriedBtn = document.getElementById('married-btn');

            if (hasSpouse) {
                spouseSection.style.display = 'block';
                marriedBtn.classList.add('active');
                singleBtn.classList.remove('active');
                document.getElementById('spouse-scores-section').style.display = 'block';
            } else {
                spouseSection.style.display = 'none';
                singleBtn.classList.add('active');
                marriedBtn.classList.remove('active');
                document.getElementById('spouse-scores-section').style.display = 'none';
                // Reset spouse scores
                scores.spouseFrenchOral = 0;
                scores.spouseAge = 0;
                scores.spouseEducation = 0;
                scores.spouseFieldOfStudy = 0;
            }
            updateScoreDisplay();
        }

        function setFinancialAutonomy(accepted) {
            financialAutonomyAccepted = accepted;
        }

        function updateScoreDisplay() {
            // Update individual score displays
            document.getElementById('score-french-oral-comp').textContent = `${scores.frenchOralComprehension} pts`;
            document.getElementById('score-french-oral-prod').textContent = `${scores.frenchOralProduction} pts`;
            document.getElementById('score-french-written-comp').textContent = `${scores.frenchWrittenComprehension} pts`;
            document.getElementById('score-french-written-prod').textContent = `${scores.frenchWrittenProduction} pts`;
            
            const frenchTotal = scores.frenchOralComprehension + scores.frenchOralProduction + 
                               scores.frenchWrittenComprehension + scores.frenchWrittenProduction;
            document.getElementById('score-french-total').textContent = `${frenchTotal} pts`;
            
            const englishTotal = scores.englishOralComprehension + scores.englishOralProduction + 
                                scores.englishWrittenComprehension + scores.englishWrittenProduction;
            document.getElementById('score-english-total').textContent = `${englishTotal} pts`;
            
            document.getElementById('score-age').textContent = `${scores.age} pts`;
            document.getElementById('score-education').textContent = `${scores.education} pts`;
            document.getElementById('score-field-of-study').textContent = `${scores.fieldOfStudy} pts`;
            document.getElementById('score-work-experience').textContent = `${scores.workExperience} pts`;
            document.getElementById('score-quebec-diploma').textContent = `${scores.quebecDiploma} pts`;
            document.getElementById('score-quebec-work').textContent = `${scores.quebecWorkExperience} pts`;
            document.getElementById('score-spouse-french').textContent = `${scores.spouseFrenchOral} pts`;
            document.getElementById('score-spouse-age').textContent = `${scores.spouseAge} pts`;
            document.getElementById('score-spouse-education').textContent = `${scores.spouseEducation} pts`;
            document.getElementById('score-spouse-field').textContent = `${scores.spouseFieldOfStudy} pts`;
            document.getElementById('score-job-offer').textContent = `${scores.jobOffer} pts`;
            document.getElementById('score-children').textContent = `${scores.children} pts`;
            document.getElementById('score-family').textContent = `${scores.familyInQuebec} pts`;

            // Calculate and display total score
            const totalScore = Object.values(scores).reduce((sum, score) => sum + score, 0);
            const totalElement = document.getElementById('total-score');
            totalElement.textContent = `${totalScore} points`;
            
            // Keep total score color as black
            totalElement.className = 'text-lg md:text-xl font-bold text-black';
        }

        // Utility functions
        function showFieldExplanation() {
            document.getElementById('field-explanation-popup').style.display = 'flex';
        }

        function closeFieldExplanation() {
            document.getElementById('field-explanation-popup').style.display = 'none';
        }

        function resetCalculator() {
            if (confirm('Êtes-vous sûr de vouloir refaire le test ? Toutes vos données seront perdues.')) {
                // Reset all scores
                Object.keys(scores).forEach(key => {
                    scores[key] = 0;
                });
                
                // Reset other state
                currentStep = 0;
                hasSpouse = false;
                financialAutonomyAccepted = false;
                
                // Reset form elements
                document.getElementById('age').value = '';
                document.getElementById('financial-autonomy').checked = false;
                document.getElementById('lead-email').value = '';
                document.getElementById('consent-communications').checked = false;
                document.getElementById('consent-privacy').checked = false;
                
                // Reset button states
                document.querySelectorAll('.option-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                // Reset spouse section
                setHasSpouse(false);
                
                // Reset lead magnet
                document.getElementById('lead-form').style.display = 'block';
                document.getElementById('success-message').style.display = 'none';
                
                // Update displays
                updateScoreDisplay();
                updateNavigation();
                scrollToTop();
            }
        }

        async function downloadResults() {
            try {
                const element = document.getElementById('score-breakdown');
                if (!element) {
                    alert('Aucun résultat à télécharger.');
                    return;
                }

                const options = {
                    backgroundColor: '#ffffff',
                    scale: 2,
                    useCORS: true,
                    allowTaint: true,
                    scrollX: 0,
                    scrollY: 0,
                    width: element.scrollWidth,
                    height: element.scrollHeight
                };

                const canvas = await html2canvas(element, options);
                
                canvas.toBlob((blob) => {
                    if (blob) {
                        const url = window.URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `Resultats-Arrima-${new Date().toLocaleDateString('fr-CA')}.jpg`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        window.URL.revokeObjectURL(url);
                    }
                }, 'image/jpeg', 0.95);
            } catch (error) {
                console.error('Error downloading results:', error);
                alert('Erreur lors du téléchargement. Veuillez réessayer.');
            }
        }

        function handleLeadMagnetSubmit(event) {
            event.preventDefault();
            document.getElementById('lead-form').style.display = 'none';
            document.getElementById('success-message').style.display = 'block';
            // Here you would typically send the form data to your backend
        }

        // Initialize the calculator when the page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
