// --- All previous data objects (D_ARRIMA) and helper functions remain the same ---
const D_ARRIMA = { maritalStatus: [ { key: "seul", text: "Je soumets seul(e)", value: "false", icon: "ğŸ‘¤" }, { key: "avec_conjoint", text: "Avec Ã©poux/conjoint de fait", value: "true", icon: "ğŸ‘¥" } ], frLangLevelsDP_Oral: [ { key: "none_NCLC_1_4_o", text: "NCLC 1-4 / Non testÃ©", points: 0, icon: "ğŸ”‡" }, { key: "NCLC_5_o", text: "NCLC 5", points: 20, icon: "ğŸ’¬" }, { key: "NCLC_6_o", text: "NCLC 6", points: 40, icon: "ğŸ—£ï¸" }, { key: "NCLC_7_o", text: "NCLC 7", points: 80, icon: "ğŸ“¢" }, { key: "NCLC_8_o", text: "NCLC 8", points: 90, icon: "ğŸ”¥" }, { key: "NCLC_9_o", text: "NCLC 9", points: 100, icon: "ğŸŒŸ" }, { key: "NCLC_10_PLUS_o", text: "NCLC 10+", points: 110, icon: "ğŸ†" } ], frLangLevelsDP_Ecrit: [ { key: "none_NCLC_1_4_e", text: "NCLC 1-4 / Non testÃ©", points: 0, icon: "ğŸ“" }, { key: "NCLC_5_e", text: "NCLC 5", points: 10, icon: "âœï¸" }, { key: "NCLC_6_e", text: "NCLC 6", points: 20, icon: "ğŸ“œ" }, { key: "NCLC_7_PLUS_e", text: "NCLC 7+", points: 30, icon: "âœ’ï¸" } ], enLangLevelsDP: [ { key: "none_CLB_1_4", text: "CLB 1-4 / Non testÃ©", points: 0, icon: "â–" }, { key: "CLB_5_8", text: "CLB 5-8 (par compÃ©tence)", points: 6, icon: "ğŸ’¬" }, { key: "CLB_9_PLUS", text: "CLB 9+ (par compÃ©tence)", points: 12, icon: "ğŸ“¢" } ], educationLevelsDP: [ { key: "none_edu", text: "Aucun diplÃ´me / Secondaire non terminÃ©", points: 0, icon: "ğŸš«" }, { key: "SEC_GEN_PRO", text: "Secondaire gÃ©nÃ©ral ou professionnel", points: 20, icon: "ğŸ“" }, { key: "POST_SEC_TECH_1_2", text: "Post-secondaire technique (1-2 ans)", points: 40, icon: "ğŸ§‘â€ğŸ”§" }, { key: "DEC_TECH_POST_SEC_3", text: "DEC technique / Post-secondaire technique (3 ans)", points: 70, icon: "ğŸ”©" }, { key: "UNIV_BAC", text: "Universitaire 1er cycle (BAC 3 ans+)", points: 90, icon: "ğŸ›ï¸" }, { key: "UNIV_MAITRISE", text: "Universitaire 2e cycle (MaÃ®trise)", points: 110, icon: "ğŸŒŸ" }, { key: "UNIV_DOCTORAT", text: "Universitaire 3e cycle (Doctorat)", points: 130, icon: "ğŸ†" } ], domaineFormationDP: [ { key: "none_dom", text: "Non applicable / Mon domaine n'est pas listÃ© ici â•", points: 0, icon: "â“", examplesHTML: '<h4>Domaine Non ListÃ© ou Non Applicable</h4><p>Si votre domaine d\'Ã©tudes ne semble correspondre Ã  aucune des catÃ©gories ci-dessous, ou si vous n\'Ãªtes pas certain.</p><p><em>Il est recommandÃ© de consulter les listes de professions (CNP) rÃ©guliÃ¨rement ciblÃ©es par Arrima pour Ã©valuer la demande pour votre profil spÃ©cifique.</em></p>' }, { key: "DOM_NEUTRE_PEU", text: "Domaine gÃ©nÃ©ral / Peu en demande â•", points: 10, icon: "ğŸ¤", examplesHTML: '<h4>Domaine gÃ©nÃ©ral / Peu en demande : Exemples indicatifs</h4><p>Concerne souvent des formations plus gÃ©nÃ©rales sans spÃ©cialisation technique pointue ou expÃ©rience directement applicable dans un secteur actuellement en pÃ©nurie au QuÃ©bec. Exemples :</p><ul><li>Certaines branches des sciences humaines (histoire gÃ©nÃ©rale, philosophie sans application spÃ©cifique)</li><li>Arts (sans lien avec le numÃ©rique ou des mÃ©tiers d\'artisanat en demande)</li><li>Administration gÃ©nÃ©rale sans spÃ©cialisation technique ou expÃ©rience sectorielle recherchÃ©e.</li></ul><p><em><strong>Note :</strong> L\'important est souvent la transfÃ©rabilitÃ© des compÃ©tences et l\'expÃ©rience. Ce domaine peut quand mÃªme Ãªtre valorisÃ© par votre expÃ©rience professionnelle.</em></p>' }, { key: "DOM_DEMANDE_TI_GENIE_GESTION", text: "TI, GÃ©nie, Gestion SpÃ©cialisÃ©e, Finance â•", points: 40, icon: "ğŸ’»", examplesHTML: '<h4>TI, GÃ©nie, Gestion SpÃ©cialisÃ©e, Finance : Exemples indicatifs</h4><ul><li><strong>TI/Logiciel :</strong> DÃ©veloppeurs (web, mobile, logiciel, jeux), IngÃ©nieurs logiciel, Analystes de donnÃ©es, SpÃ©cialistes cybersÃ©curitÃ©, Administrateurs systÃ¨mes/rÃ©seaux.</li><li><strong>GÃ©nie (autre) :</strong> IngÃ©nieurs (civil, mÃ©canique, Ã©lectrique, industriel), Techniciens en gÃ©nie.</li><li><strong>Gestion/Finance :</strong> Gestionnaires de projet (surtout TI/GÃ©nie), Comptables (CPA), Analystes financiers, SpÃ©cialistes RH (avec exp. pertinente).</li></ul><p><em><strong>Note :</strong> Les certifications et l\'expÃ©rience spÃ©cifique sont clÃ©s.</em></p>' }, { key: "DOM_FORTE_DEMANDE_SANTE_ENSEIGNEMENT", text: "SantÃ©, Services Sociaux, Enseignement, Ã‰ducation â•", points: 70, icon: "â¤ï¸", examplesHTML: '<h4>SantÃ©, Services Sociaux, Enseignement, Ã‰ducation : Exemples indicatifs</h4><ul><li><strong>SantÃ© :</strong> Infirmiers/InfirmiÃ¨res (autorisÃ©s/auxiliaires), PrÃ©posÃ©s aux bÃ©nÃ©ficiaires, MÃ©decins (certaines spÃ©cialitÃ©s), Pharmaciens, Technologues mÃ©dicaux.</li><li><strong>Services Sociaux :</strong> Travailleurs sociaux, Psychologues.</li><li><strong>Enseignement/Ã‰ducation :</strong> Enseignants (primaire/secondaire, surtout maths, sciences, franÃ§ais), Ã‰ducateurs/Ã‰ducatrices de la petite enfance.</li></ul><p><em><strong>Note :</strong> Beaucoup de ces professions sont rÃ©glementÃ©es au QuÃ©bec. Une reconnaissance professionnelle peut Ãªtre nÃ©cessaire.</em></p>' } ], experienceLevelsDP: [ { key: "none_exp", text: "< 6 mois / Aucune", points: 0, icon: "â³" }, { key: "EXP_6_11M", text: "6â€“11 mois", points: 20, icon: "ğŸ’¼" }, { key: "EXP_12_23M", text: "12â€“23 mois", points: 40, icon: "ğŸ—“ï¸" }, { key: "EXP_24_35M", text: "24â€“35 mois", points: 60, icon: "ğŸ“ˆ" }, { key: "EXP_36_47M", text: "36â€“47 mois", points: 80, icon: "ğŸ“Š" }, { key: "EXP_48M_PLUS", text: "â‰¥ 48 mois", points: 100, icon: "ğŸ†" } ], diplomeQC_DP: [ { key: "none_dip_qc", text: "Non", points: 0, icon: "ğŸš«" }, { key: "DEP_1800H_AEC_DEC_TECH_QC", text: "DEP (â‰¥1800h) / AEC / DEC technique du QuÃ©bec", points: 70, icon: "ğŸ" }, { key: "UNIV_QC_BAC_PLUS", text: "DiplÃ´me universitaire du QuÃ©bec (BAC, MaÃ®trise, Doc)", points: 100, icon: "ğŸ›ï¸" } ], experienceQC_DP: [ { key: "none_exp_qc", text: "Non", points: 0, icon: "ğŸš«" }, { key: "EXP_QC_6_11M", text: "6 Ã  11 mois", points: 70, icon: "ğŸ’¼" }, { key: "EXP_QC_12M_PLUS", text: "12 mois et plus", points: 110, icon: "ğŸ†" } ], frLangLevelsSP_Oral: [ { key: "none_NCLC_1_4_sp_o", text: "NCLC 1-4 / Non testÃ©", points: 0, icon: "ğŸ”‡" }, { key: "NCLC_5_6_sp_o", text: "NCLC 5-6", points: 10, icon: "ğŸ’¬" }, { key: "NCLC_7_PLUS_sp_o", text: "NCLC 7+", points: 20, icon: "ğŸ—£ï¸" } ], educationLevelsSP: [ { key: "none_edu_sp", text: "Aucun / Secondaire non terminÃ©", points: 0, icon: "ğŸš«" }, { key: "SEC_SP", text: "Secondaire", points: 5, icon: "ğŸ“" }, { key: "POST_SEC_SP_BAC", text: "Post-secondaire / DEC / BAC", points: 10, icon: "ğŸ“š" }, { key: "UNIV_MASTER_DOC_SP", text: "Universitaire 2e/3e cycle", points: 20, icon: "ğŸŒŸ" } ], domaineFormationSP: [ { key: "none_dom_sp", text: "Non applicable / Domaine non listÃ© â•", points: 0, icon: "â“", examplesHTML: '<h4>Domaine Non ListÃ© ou Non Applicable (Conjoint)</h4><p>Si le domaine d\'Ã©tudes de votre conjoint(e) ne semble pas correspondre Ã  la catÃ©gorie ci-dessous ou si vous n\'Ãªtes pas certain.</p>' }, { key: "DOM_DEMANDE_SP", text: "Domaine en demande (similaire au DP) â•", points: 10, icon: "ğŸ‘", examplesHTML: '<h4>Domaine en Demande (Conjoint) : Exemples indicatifs</h4><p>Concerne gÃ©nÃ©ralement les mÃªmes secteurs porteurs que pour le demandeur principal (TI, GÃ©nie, SantÃ©, Enseignement, Gestion spÃ©cialisÃ©e), mais l\'impact sur les points est moindre.</p><ul><li>L\'objectif est de dÃ©montrer une bonne capacitÃ© d\'intÃ©gration professionnelle du conjoint.</li></ul>' } ], offreEmploiValidee: [ { key: "none_offre", text: "Aucune offre d'emploi validÃ©e", points: 0, icon: "ğŸš«" }, { key: "OFFRE_CMM", text: "Offre validÃ©e DANS la CMM (MontrÃ©al)", points: 180, icon: "ğŸ™ï¸" }, { key: "OFFRE_HORS_CMM", text: "Offre validÃ©e HORS de la CMM", points: 380, icon: "ğŸï¸" } ], familleQC: [ { key: "none_fam_qc", text: "Non", points: 0, icon: "ğŸš«" }, { key: "oui_fam_qc", text: "Oui, famille proche au QuÃ©bec", points: 20, icon: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§" } ] };
function toggleAccordionContent(groupId, accordionId) { const accordionContent = document.getElementById(accordionId); if (!accordionContent) return; const groupElement = document.getElementById(groupId); if (!groupElement) return; const allAccordionsInGroup = groupElement.querySelectorAll('.radio-accordion-content'); const isCurrentlyOpen = accordionContent.style.display === 'block'; allAccordionsInGroup.forEach(acc => { if (acc.id !== accordionId) { acc.style.display = 'none'; } }); accordionContent.style.display = isCurrentlyOpen ? 'none' : 'block'; }
document.addEventListener('click', function(event) { let targetElement = event.target; if (targetElement.tagName === 'A' && targetElement.closest('.privacy-group')) { return; } let isClickInsideAccordionSystem = false; while (targetElement != null) { if (targetElement.classList && (targetElement.classList.contains('radio-accordion-content') || targetElement.classList.contains('radio-option') || targetElement.classList.contains('radio-option-wrapper'))) { isClickInsideAccordionSystem = true; break; } targetElement = targetElement.parentElement; } if (!isClickInsideAccordionSystem) { document.querySelectorAll('.radio-accordion-content').forEach(acc => { acc.style.display = 'none'; }); } });
function populateRadioGroup(groupId, data, groupName, isSingleColumn = false, isMaritalStatus = false) { const groupElement = document.getElementById(groupId); if (!groupElement) { console.warn("Radio group element not found: " + groupId); return; } if (isSingleColumn) groupElement.classList.add('single-column'); if (isMaritalStatus) groupElement.classList.add('two-column-desktop'); groupElement.innerHTML = ""; data.forEach((item, index) => { const optionWrapper = document.createElement('div'); optionWrapper.className = 'radio-option-wrapper'; const optionDiv = document.createElement('div'); optionDiv.className = 'radio-option'; const input = document.createElement('input'); input.type = 'radio'; input.id = `${groupName}_${item.key}`; input.name = groupName; input.value = isMaritalStatus ? item.value.toString() : item.key; input.checked = index === 0; input.onchange = () => { if (isMaritalStatus) { toggleSpouseSection(); } calculatePoints(); }; const label = document.createElement('label'); label.htmlFor = input.id; label.innerHTML = `<span class="radio-icon">${item.icon || "â–«ï¸"}</span><span class="radio-text">${item.text}</span>`; if (item.examplesHTML) { label.setAttribute('data-has-accordion', 'true'); label.addEventListener('click', function(event) { if (event.target.classList.contains('radio-text') || event.target.classList.contains('radio-icon') || event.target === this) { if (!input.checked) { input.checked = true; if (isMaritalStatus) toggleSpouseSection(); calculatePoints(); } toggleAccordionContent(groupId, `${groupName}_${item.key}_accordion`); } }); } optionDiv.appendChild(input); optionDiv.appendChild(label); optionWrapper.appendChild(optionDiv); if (item.examplesHTML) { const accordionContentDiv = document.createElement('div'); accordionContentDiv.id = `${groupName}_${item.key}_accordion`; accordionContentDiv.className = 'radio-accordion-content'; accordionContentDiv.innerHTML = item.examplesHTML; optionWrapper.appendChild(accordionContentDiv); } groupElement.appendChild(optionWrapper); }); }
function getPointsFromRadio(groupName, dataArray) { const selectedRadio = document.querySelector(`input[name="${groupName}"]:checked`); if (!selectedRadio) return 0; const selectedOption = dataArray.find(item => item.key === selectedRadio.value); return selectedOption ? (Number(selectedOption.points) || 0) : 0; }
function getNumericInputVal(elementId) { const inputElement = document.getElementById(elementId); if (!inputElement) { return 0; } let val = Number(inputElement.value) || 0; return val < 0 ? 0 : val; }
function getArrimaAgePoints(ageInput, isSpouse = false) { const age = Number(ageInput) || 0; const ageValidationMsgEl = document.getElementById(isSpouse ? 'age_validation_message_sp' : 'age_validation_message_dp'); if(ageValidationMsgEl) ageValidationMsgEl.textContent = ''; if (age !== 0 && age < 18) { if(ageValidationMsgEl) ageValidationMsgEl.textContent = 'L\'Ã¢ge doit Ãªtre de 18 ans ou plus.'; return 0; } if (age === 0) return 0; if (isSpouse) { if (age >= 18 && age <= 35) return 20; if (age >= 36 && age <= 40) return 10; return 0; } else { if (age >= 18 && age <= 30) return 130; if (age === 31) return 124; if (age === 32) retur
